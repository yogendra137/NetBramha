<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NB Score Gauge</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    #score-container {
      max-width: 500px;
      margin: auto;
      text-align: center;
      font-family: Arial, sans-serif;
    }
    canvas {
      max-width: 100%;
    }
    #needle {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>

<div id="score-container">
  <h2>Hello, Rahul L.</h2>
  <div style="position: relative;">
    <canvas id="gaugeChart" width="300" height="150"></canvas>
    <canvas id="needle" width="300" height="150"></canvas>
  </div>
  <h1>767</h1>
  <p>is your NB Score as of 19th Apr '22</p>
  <a href="#">Score Analysis</a> |
  <button style="background: yellow; border: none; padding: 10px 20px;">Refresh Now</button>
</div>

<script>
const gaugeChart = document.getElementById('gaugeChart').getContext('2d');
const needleCanvas = document.getElementById('needle');
const ctx = needleCanvas.getContext('2d');

// Chart Data
const data = {
  labels: ['Poor', 'Average', 'Good', 'Excellent'],
  datasets: [{
    data: [200, 150, 100, 150],
    backgroundColor: ['#d9534f', '#f0ad4e', '#f9e79f', '#5cb85c'],
    borderWidth: 0,
    cutout: '70%',
    circumference: 180,
    rotation: 270
  }]
};

// Chart Configuration
const config = {
  type: 'doughnut',
  data: data,
  options: {
    responsive: true,
    plugins: { legend: { display: false } }
  }
};

new Chart(gaugeChart, config);

// Needle + Semi-Circle Drawing
function drawNeedle(score) {
  const centerX = 150;
  const centerY = 150;
  const radius = 100;

  ctx.clearRect(0, 0, 300, 150);

  // ðŸŸ¡ Draw Semi-Circle behind gauge
  ctx.beginPath();
  ctx.arc(centerX, centerY, radius, Math.PI, 0);
  ctx.lineWidth = 6;
  ctx.strokeStyle = '#ccc';
  ctx.stroke();

  // ðŸ”º Draw needle
  const percentage = (score - 300) / 600;
  const angle = Math.PI * (1 - percentage);

  const needleLength = 70;
  const needleWidth = 6;

  const tipX = centerX + needleLength * Math.cos(angle);
  const tipY = centerY - needleLength * Math.sin(angle);

  const leftX = centerX + needleWidth * Math.cos(angle + Math.PI / 2);
  const leftY = centerY - needleWidth * Math.sin(angle + Math.PI / 2);

  const rightX = centerX + needleWidth * Math.cos(angle - Math.PI / 2);
  const rightY = centerY - needleWidth * Math.sin(angle - Math.PI / 2);

  ctx.beginPath();
  ctx.moveTo(tipX, tipY);
  ctx.lineTo(leftX, leftY);
  ctx.lineTo(rightX, rightY);
  ctx.closePath();
  ctx.fillStyle = '#000';
  ctx.fill();

  // âš« Draw center knob
  ctx.beginPath();
  ctx.arc(centerX, centerY, 6, 0, 2 * Math.PI);
  ctx.fillStyle = '#000';
  ctx.fill();
}

drawNeedle(767); // Set score here
</script>

</body>
</html>
